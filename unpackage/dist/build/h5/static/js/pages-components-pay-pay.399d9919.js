(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-components-pay-pay"],{"2d21":function(e,t,i){"use strict";var a=i("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(i("59ad")),o=a(i("e814"));i("c5f6"),i("28a5");var n=i("d4ee"),d={data:function(){return{isShop:!1,res:"",sku_id:"",addressList:"",defaultAddress:"",name:"",phone:"",shopId:"",modeway:["门店自取","物流配送"],index2:1,flowway:[],co_id:"",index3:0,salesType:[],list:0,index:2,isAddress:!0,cash:"",balance:"",add:""}},onLoad:function(){var e=this;(0,n.request)({url:"index.php?s=/wap/order/ApiorderInfo",method:"POST"}).then(function(t){for(var i=0;i<t.data.itemlist.length;i++)t.data.itemlist[i].picture_info.pic_cover="http://192.168.110.233/"+t.data.itemlist[i].picture_info.pic_cover;e.res=t.data,console.log(e.res),e.sku_id=t.data.goods_sku_list;for(var a=0;a<e.res.pickup_point_list.data.length;a++){var s=e.res.pickup_point_list.data[a],o=s.province_name+s.city_name+s.dictrict_name+s.address;e.salesType=e.salesType.concat(o)}(0,n.request)({url:"index.php?s=/wap/order/getAddres",method:"post",data:{sku_id:e.sku_id}}).then(function(t){if(e.addressList=t.data,console.log(e.addressList),e.addressList.express_company_list&&e.addressList.express_company_list.length>0)for(var i=0;i<e.addressList.express_company_list.length;i++)e.flowway=e.flowway.concat(e.addressList.express_company_list[i].company_name);e.addressList.address_default.address_info=e.addressList.address_default.address_info.split("&nbsp;").join(""),e.defaultAddress=e.addressList.address_default.address_info+e.addressList.address_default.address,e.name=e.addressList.address_default.consigner,e.phone=e.addressList.address_default.phone,e.add=(Number(e.res.count_money)+Number(e.addressList.express)).toFixed(2)})})},onShow:function(){var e=this;(0,n.request)({url:"index.php?s=/wap/order/getAddres",method:"post",data:{sku_id:this.sku_id||""}}).then(function(t){if(e.addressList=t.data,e.addressList.express_company_list&&e.addressList.express_company_list.length>0)for(var i=0;i<e.addressList.express_company_list.length;i++)e.flowway=e.flowway.concat(e.addressList.express_company_list[i].company_name);e.addressList.address_default.address_info=e.addressList.address_default.address_info.split("&nbsp;").join(""),e.defaultAddress=e.addressList.address_default.address_info+e.addressList.address_default.address,e.name=e.addressList.address_default.consigner,e.phone=e.addressList.address_default.phone,e.total=(Number(e.res.count_money)+Number(e.addressList.express)).toFixed(2)})},methods:{chooseShop:function(){uni.navigateTo({url:"/pages/components/choose-shop/choose-shop"})},address:function(){uni.navigateTo({url:"/pages/components/address/address"})},bindPickerChange:function(e){this.index2=e.target.value,1==e.target.value?this.isAddress=!0:this.isAddress=!1},bindFlowChange:function(e){this.index3=e.target.value,this.co_id=this.addressList.express_company_list[this.index3].co_id,console.log(this.co_id)},bindShopChange:function(e){this.list=e.target.value,this.shopId=this.res.pickup_point_list.data[this.list].id},money:function(e){this.cash=(0,o.default)(e.target.value)||0;var t=(0,s.default)(this.res.count_money)+(0,s.default)(this.addressList.express),i=(0,s.default)(this.res.n_money),a=this.cash+((0,o.default)(this.balance)?(0,o.default)(this.balance):0);""==this.balance?i<t?this.cash>i?(this.cash=i,this.add=(t-this.cash).toFixed(2)):this.add=(t-this.cash).toFixed(2):this.cash>t?(this.cash=t,this.add=0):this.add=(t-this.cash).toFixed(2):""!=this.balance&&(i>t?a>=t?this.cash<t?(this.balance=(t-this.cash).toFixed(2),this.add=0):(this.cash=t,this.balance=0,this.add=0):this.add=(t-this.balance-this.cash).toFixed(2):a>=t&&this.cash>i?(this.cash=i,this.add=(t-this.balance-i).toFixed(2)):this.add=(t-this.balance-this.cash).toFixed(2))},changeBalance:function(e){this.balance=(0,o.default)(e.target.value)||0;var t=(0,s.default)(this.res.count_money)+(0,s.default)(this.addressList.express),i=(0,s.default)(this.res.member_account.balance);this.balance,(0,o.default)(this.cash)&&(0,o.default)(this.cash);this.cash==t&&(this.balance=0),""==this.cash||0==this.cash?i&&i>=t?this.balance>t?(this.balance=t,this.add=0):this.add=(t-this.balance).toFixed(2):this.balance>i?(this.balance=i,this.add=(t-this.balance).toFixed(2)):this.add=(t-this.balance).toFixed(2):i&&i>=t?this.balance>t-this.cash?(this.balance=t,this.add=0):this.add=(t-this.balance-this.cash).toFixed(2):this.balance>i?(this.balance=i,this.add=(t-this.balance-this.cash).toFixed(2)):this.add=(t-this.balance-this.cash).toFixed(2)},handleOrder:function(){console.log(111),(0,n.request)({url:"index.php?s=/wap/order/ordercreate",method:"post",data:{goods_sku_list:this.res.goods_sku_list,leavemessage:"",use_coupon:0,integral:0,account_balance:this.balance,pay_type:0,buyer_invoice:"",pick_up_id:this.shopId||this.addressList.express_company_list[this.index3].co_id,shipping_company_id:this.co_id,cashback_price:this.res.cashback_price,n_money:this.cash}}).then(function(e){uni.showToast({title:"订单提交中",icon:"loading"}),uni.navigateTo({url:"/pages/components/order/order"})})}}};t.default=d},"365c":function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-page-body[data-v-4a48995a]{background:#efeff4;-webkit-box-sizing:border-box;box-sizing:border-box;padding-bottom:%?90?%}.mode-box[data-v-4a48995a]{-webkit-box-sizing:border-box;box-sizing:border-box;padding:%?30?%;background:#fff;border-bottom:1px solid #efefef}.mode-box .mode[data-v-4a48995a]{-webkit-box-sizing:border-box;box-sizing:border-box;font-size:%?28?%;color:#444}.mode-box .mode .userInfo[data-v-4a48995a]{-webkit-box-sizing:border-box;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.mode-box .mode .userInfo uni-text[data-v-4a48995a]{font-size:%?28?%;color:#444;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}.mode-box .mode .address[data-v-4a48995a]{-webkit-box-sizing:border-box;box-sizing:border-box;margin-top:%?12?%}.order-box[data-v-4a48995a]{background:#fff;-webkit-box-sizing:border-box;box-sizing:border-box;padding:0 %?18?%}.order-box .order[data-v-4a48995a]{-webkit-box-sizing:border-box;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.order-box .order .order-left[data-v-4a48995a]{-webkit-box-sizing:border-box;box-sizing:border-box}.order-box .order .order-left .sketchy[data-v-4a48995a]{font-size:%?24?%;color:#444;margin-top:%?18?%}.order-box .order .order-left .detail-address[data-v-4a48995a]{font-size:%?28?%;color:#000;font-weight:700;margin-top:%?18?%}.order-box .order .order-right[data-v-4a48995a]{-webkit-box-sizing:border-box;box-sizing:border-box;width:%?30?%;height:%?30?%}.order-box .order .order-right uni-image[data-v-4a48995a]{width:100%;height:100%;display:block}.line[data-v-4a48995a]{background:#ccc;height:4px;width:100%}.product-box[data-v-4a48995a]{background:#fff;-webkit-box-sizing:border-box;box-sizing:border-box}.product-box .product[data-v-4a48995a]{-webkit-box-sizing:border-box;box-sizing:border-box;padding:%?30?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;border-bottom:1px solid #e5e5e5}.product-box .product .product-img[data-v-4a48995a]{width:%?140?%;height:%?140?%}.product-box .product .product-img uni-image[data-v-4a48995a]{width:100%;height:100%}.product-box .product .product-title[data-v-4a48995a]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;-webkit-box-sizing:border-box;box-sizing:border-box;padding-left:%?30?%;padding-right:%?48?%}.product-box .product .product-title .title[data-v-4a48995a]{font-size:%?30?%;color:#444;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.product-box .product .product-title .params[data-v-4a48995a]{font-size:%?24?%;color:#aaa;margin-top:%?10?%}.product-box .product .product-price[data-v-4a48995a]{-webkit-box-sizing:border-box;box-sizing:border-box}.product-box .product .product-price .price[data-v-4a48995a]{font-size:%?30?%;color:#000}.product-box .product .product-price .number[data-v-4a48995a]{font-size:%?24?%;color:#aaa;text-align:right}.delivery-box[data-v-4a48995a]{background:#fff;-webkit-box-sizing:border-box;box-sizing:border-box}.delivery-box .delivery-item[data-v-4a48995a]{-webkit-box-sizing:border-box;box-sizing:border-box;padding:%?30?%;border-bottom:1px solid #e5e5e5;font-size:%?30?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.delivery-box .delivery-item .delivery-radio[data-v-4a48995a]{-webkit-box-sizing:border-box;box-sizing:border-box}.delivery-box .delivery-item .delivery-title[data-v-4a48995a]{-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}.delivery-box .delivery-item .delivery-title-choose[data-v-4a48995a]{color:#c7c7cc}.delivery-box .delivery-item .delivery-title-choose uni-image[data-v-4a48995a]{width:%?30?%;height:%?30?%;position:relative;top:%?4?%}.cut-line[data-v-4a48995a]{height:%?18?%;width:100%;background:#efeff4}.pay-box[data-v-4a48995a]{background:#fff;-webkit-box-sizing:border-box;box-sizing:border-box}.pay-box .pay-item[data-v-4a48995a]{-webkit-box-sizing:border-box;box-sizing:border-box;padding:%?30?%;border-bottom:1px solid #e5e5e5;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;font-size:%?30?%;color:#000}.pay-money[data-v-4a48995a]{-webkit-box-sizing:border-box;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:%?90?%;font-size:%?30?%;color:#fff;line-height:%?90?%;position:fixed;bottom:0;left:0;width:100%}.pay-money uni-view[data-v-4a48995a]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;text-align:center}.pay-money uni-view[data-v-4a48995a]:first-child{background:#6c2e2e}.pay-money uni-view:first-child uni-text[data-v-4a48995a]:first-child{color:#906b6b}.pay-money uni-view[data-v-4a48995a]:nth-child(2){background:#b4302d}body.?%PAGE?%[data-v-4a48995a]{background:#efeff4}',""])},a89b:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[e.isAddress?i("v-uni-view",{staticClass:"mode-box",on:{click:function(t){t=e.$handleEvent(t),e.address()}}},[i("v-uni-view",{staticClass:"mode"},[i("v-uni-view",{staticClass:"userInfo"},[i("v-uni-text",[e._v(e._s(this.name))]),i("v-uni-text",[e._v(e._s(this.phone))])],1),i("v-uni-view",{staticClass:"address"},[i("v-uni-text",[e._v(e._s(this.defaultAddress))])],1)],1)],1):e._e(),i("v-uni-view",{staticClass:"product-box"},[e.res.itemlist?i("v-uni-view",{staticClass:"product"},[i("v-uni-view",{staticClass:"product-img"},[i("v-uni-image",{attrs:{src:e.res.itemlist[0].picture_info.pic_cover,mode:""}})],1),i("v-uni-view",{staticClass:"product-title"},[i("v-uni-view",{staticClass:"title"},[i("v-uni-text",[e._v(e._s(e.res.itemlist[0].goods_name))])],1),i("v-uni-view",{staticClass:"params"},[i("v-uni-text",[e._v(e._s(e.res.itemlist[0].sku_name))])],1)],1),i("v-uni-view",{staticClass:"product-price"},[i("v-uni-view",{staticClass:"price"},[i("v-uni-text",[e._v("￥"+e._s(e.res.itemlist[0].price))])],1),i("v-uni-view",{staticClass:"number"},[i("v-uni-text",[e._v("×"+e._s(e.res.itemlist[0].num))])],1)],1)],1):e._e()],1),i("v-uni-view",{staticClass:"delivery-box"},[i("v-uni-view",{staticClass:"delivery-item"},[i("v-uni-view",{staticClass:"delivery-title"},[i("v-uni-text",[e._v("配送方式")])],1),i("v-uni-view",{staticClass:"delivery-title-choose",staticStyle:{display:"flex"}},[i("v-uni-picker",{attrs:{value:e.index2,range:e.modeway},on:{change:function(t){t=e.$handleEvent(t),e.bindPickerChange(t)}}},[i("v-uni-view",[e._v(e._s(e.modeway[e.index2]))])],1),i("v-uni-image",{attrs:{src:"/static/images/icon-right.png",mode:""}})],1)],1),i("v-uni-view",{staticClass:"delivery-item"},[i("v-uni-view",{staticClass:"delivery-title"},[i("v-uni-text",[e._v("物流配送")])],1),i("v-uni-view",{staticClass:"delivery-title-choose",staticStyle:{display:"flex"}},[i("v-uni-picker",{attrs:{value:e.index3,range:e.flowway},on:{change:function(t){t=e.$handleEvent(t),e.bindFlowChange(t)}}},[i("v-uni-view",[e._v(e._s(e.flowway[e.index3]))])],1),i("v-uni-image",{attrs:{src:"/static/images/icon-right.png",mode:""}})],1)],1),e.isAddress?e._e():i("v-uni-view",{staticClass:"delivery-item"},[i("v-uni-view",{staticClass:"delivery-title"},[i("v-uni-text",[e._v(e._s(e.salesType[e.list]))])],1),i("v-uni-view",{staticClass:"delivery-title-choose",staticStyle:{display:"flex"}},[i("v-uni-picker",{attrs:{value:e.list,range:e.salesType},on:{change:function(t){t=e.$handleEvent(t),e.bindShopChange(t)}}},[i("v-uni-view",[e._v(e._s(e.modeway[e.list]))])],1),i("v-uni-image",{attrs:{src:"/static/images/icon-right.png",mode:""}})],1)],1)],1),i("v-uni-view",{staticClass:"cut-line"}),i("v-uni-view",{staticClass:"pay-box"},[i("v-uni-view",{staticClass:"pay-item"},[i("v-uni-text",[e._v("商品总额")]),i("v-uni-text",[e._v("￥"+e._s(e.res.count_money))])],1),i("v-uni-view",{staticClass:"pay-item"},[i("v-uni-text",[e._v("运费")]),i("v-uni-text",[e._v("￥"+e._s(this.addressList.express))])],1),i("v-uni-view",{staticClass:"pay-item"},[i("v-uni-text",[e._v("折扣券")]),i("v-uni-text",{staticStyle:{color:"#ccc"}},[e._v("抵扣"+e._s(e.res.cashback_price?e.res.cashback_price:0)+"元")])],1),i("v-uni-view",{staticClass:"pay-item"},[i("v-uni-text",[e._v("现金券："),i("v-uni-text",{staticStyle:{color:"#ff4000"}},[e._v("￥"+e._s(e.res.n_money))])],1),i("v-uni-text",[i("v-uni-input",{staticStyle:{"text-align":"right"},attrs:{type:"number",placeholder:"请输入使用额度","placeholder-style":"color:#ccc"},on:{input:function(t){t=e.$handleEvent(t),e.money(t)}},model:{value:e.cash,callback:function(t){e.cash=t},expression:"cash"}})],1)],1),i("v-uni-view",{staticClass:"pay-item"},[i("v-uni-text",[e._v("使用余额："),e.res.member_account?i("v-uni-text",{staticStyle:{color:"#ff4000"}},[e._v("￥"+e._s(e.res.member_account.balance))]):e._e()],1),i("v-uni-text",[i("v-uni-input",{staticStyle:{"text-align":"right"},attrs:{type:"number",placeholder:"请输入使用余额","placeholder-style":"color:#ccc"},on:{input:function(t){t=e.$handleEvent(t),e.changeBalance(t)}},model:{value:e.balance,callback:function(t){e.balance=t},expression:"balance"}})],1)],1)],1),i("v-uni-view",{staticClass:"cut-line"}),i("v-uni-view",{staticClass:"delivery-box"},[i("v-uni-view",{staticClass:"delivery-item"},[i("v-uni-view",{staticClass:"delivery-title-choose",staticStyle:{"margin-right":"12rpx"}},[i("v-uni-image",{attrs:{src:"/static/images/payment.png",mode:""}})],1),i("v-uni-view",{staticClass:"delivery-title"},[i("v-uni-text",[e._v("余额付款")])],1),i("v-uni-view",{staticClass:"delivery-radio"},[e.res.member_account?i("v-uni-text",{staticStyle:{"margin-right":"10rpx"}},[e._v("￥"+e._s(e.res.member_account.balance))]):e._e()],1)],1)],1),i("v-uni-view",{staticClass:"pay-money"},[i("v-uni-view",[i("v-uni-text",[e._v("应付金额：")]),i("v-uni-text",[e._v("￥"+e._s(e.add))])],1),i("v-uni-view",{on:{click:function(t){t=e.$handleEvent(t),e.handleOrder()}}},[i("v-uni-text",[e._v("提交订单")])],1)],1)],1)},s=[];i.d(t,"a",function(){return a}),i.d(t,"b",function(){return s})},aaee:function(e,t,i){"use strict";var a=i("bb8d"),s=i.n(a);s.a},bb8d:function(e,t,i){var a=i("365c");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var s=i("4f06").default;s("08cd5e84",a,!0,{sourceMap:!1,shadowMode:!1})},be9a:function(e,t,i){"use strict";i.r(t);var a=i("2d21"),s=i.n(a);for(var o in a)"default"!==o&&function(e){i.d(t,e,function(){return a[e]})}(o);t["default"]=s.a},d4ee:function(e,t,i){"use strict";var a=i("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.request=n,t.getToken=r;var s=a(i("795b")),o="http://sh.086soft.cn/";function n(e){return new s.default(function(t,i){var a=d();-1!==a&&void 0!==e.data&&(e.data["token"]=a),uni.request({url:o+e.url,method:e.method||"GET",data:e.data||{token:a},header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){200!=e.statusCode&&uni.showToast({title:"数据加载失败",icon:"none"}),t(e)},fail:function(e){i(e.errMsg)}})})}function d(){var e;(new Date).getTime();return uni.getStorage({key:"token",fail:function(t){e=r()},success:function(t){var i=t.data,a=(new Date).getTime();e=i[1]<a?r():i[0]}}),e}function r(){var e="";return uni.request({url:o+"index.php?s=wap/captchac/getUserToken",header:{"content-type":"application/x-www-form-urlencoded"}}).then(function(t){e=t[1].data.token;var i=(new Date).getTime()+864e5;uni.setStorage({key:"token",data:Array(e,i)})}),e}},f5e4:function(e,t,i){"use strict";i.r(t);var a=i("a89b"),s=i("be9a");for(var o in s)"default"!==o&&function(e){i.d(t,e,function(){return s[e]})}(o);i("aaee");var n=i("2877"),d=Object(n["a"])(s["default"],a["a"],a["b"],!1,null,"4a48995a",null);t["default"]=d.exports}}]);